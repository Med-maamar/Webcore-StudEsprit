{% load static %}
<nav class="w-64 bg-white border-r border-gray-200 h-full flex flex-col">
  <div class="flex-1 overflow-y-auto p-4 space-y-1">
    <!-- Dashboard -->
    <a href="/dashboard/" 
       class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-esprit-red/10 transition-colors group">
      <svg class="w-5 h-5 text-esprit-red group-hover:scale-110 transition-transform" 
           xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l9-9 9 9M4.5 10.5V21h15V10.5" />
      </svg>
      <span class="font-semibold text-gray-900">Tableau de bord</span>
    </a>

    <!-- Admin: Users -->
    {% if current_user and current_user.role == 'Admin' %}
    <a href="/dashboard/users" 
       class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-esprit-red/10 transition-colors group">
      <svg class="w-5 h-5 text-esprit-red group-hover:scale-110 transition-transform" 
           xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" 
              d="M15 19.5V18a3 3 0 00-3-3H6a3 3 0 00-3 3v1.5M8.25 7.5a2.25 2.25 0 112.25 2.25A2.25 2.25 0 018.25 7.5zm7.5 0A2.25 2.25 0 1118 9.75 2.25 2.25 0 0115.75 7.5z" />
      </svg>
      <span class="font-semibold text-gray-900">Utilisateurs</span>
    </a>
    {% endif %}

    <!-- Section: Explorer -->
    <div class="pt-6 pb-2">
      <h3 class="px-4 text-xs font-bold uppercase tracking-wider text-gray-500">Explorer</h3>
    </div>

    <!-- Programmes Dropdown -->
    <div x-data="{ open: false }" class="space-y-1">
      <button @click="open = !open"
              class="w-full flex items-center justify-between px-4 py-3 rounded-xl hover:bg-esprit-red/10 transition-colors focus:outline-none group">
        <div class="flex items-center gap-3">
          <svg class="w-5 h-5 text-esprit-red group-hover:scale-110 transition-transform" 
               xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" 
                  d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305.002 4.408.714 6 1.958m0-13.916v13.916" />
          </svg>
          <span class="font-semibold text-gray-900">Programmes</span>
        </div>
        <svg :class="{ 'rotate-180': open }" 
             class="w-4 h-4 text-gray-500 transition-transform duration-200" 
             xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
      </button>

      <div x-show="open" x-transition:enter="transition ease-out duration-150" 
           x-transition:enter-start="opacity-0 transform -translate-y-1" 
           x-transition:enter-end="opacity-100 transform translate-y-0"
           x-transition:leave="transition ease-in duration-100"
           x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
           class="pl-10 space-y-1">
        <a href="{% url 'niveaux_list' %}" 
           class="block px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-esprit-red/10 transition-colors">
          Niveaux
        </a>
        <a href="{% url 'matieres_list' %}" 
           class="block px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-esprit-red/10 transition-colors">
          Matières
        </a>
        <a href="{% url 'cours_list' %}" 
           class="block px-3 py-2 rounded-lg text-sm font-medium text-gray-700 hover:bg-esprit-red/10 transition-colors">
          Cours
        </a>
      </div>
    </div>

    <!-- Other Links -->
    <a href="/careers/opportunities/" 
       class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-esprit-red/10 transition-colors group">
      <svg class="w-5 h-5 text-esprit-red group-hover:scale-110 transition-transform" 
           xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" 
              d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
      </svg>
      <span class="font-medium text-gray-900">Carrières</span>
    </a>

    <a href="/events/" 
       class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-esprit-red/10 transition-colors group">
      <svg class="w-5 h-5 text-esprit-red group-hover:scale-110 transition-transform" 
           xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" 
              d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5" />
      </svg>
      <span class="font-medium text-gray-900">Événements</span>
    </a>

    <!-- Section: Bibliothèque & Admin -->
    <div class="pt-6 pb-2">
      <h3 class="px-4 text-xs font-bold uppercase tracking-wider text-gray-500">Bibliothèque</h3>
    </div>

    {% if current_user and current_user.role == 'Admin' %}
      <!-- Admin: Documents -->
      <a href="/admin/library/documents/" 
         class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-esprit-red/10 transition-colors group">
        <svg class="w-5 h-5 text-esprit-red group-hover:scale-110 transition-transform" 
             xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" 
                d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m5.25 13.5h-6.75a2.25 2.25 0 01-2.25-2.25V6.375a2.25 2.25 0 012.25-2.25h6.75a2.25 2.25 0 012.25 2.25v12.75a2.25 2.25 0 01-2.25 2.25z" />
        </svg>
        <span class="font-semibold text-gray-900">Documents</span>
      </a>

      <!-- Admin: Posts -->
      <a href="/admin/library/posts/" 
         class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-esprit-red/10 transition-colors group">
        <svg class="w-5 h-5 text-esprit-red group-hover:scale-110 transition-transform" 
             xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" 
                d="M7 8h10M7 12h4m1 8a9 9 0 100-18 9 9 0 000 18z" />
        </svg>
        <span class="font-semibold text-gray-900">Posts</span>
      </a>
    {% else %}
      <!-- Public: Library -->
      <a href="/shop/" 
         class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-esprit-red/10 transition-colors group">
        <svg class="w-5 h-5 text-esprit-red group-hover:scale-110 transition-transform" 
             xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" 
                d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305.002 4.408.714 6 1.958m0-13.916v13.916" />
        </svg>
        <span class="font-medium text-gray-900">Bibliothèque</span>
      </a>
    {% endif %}
  </div>

  <!-- Footer (Optional) -->
  <div class="p-4 border-t border-gray-200">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-esprit-red/20 rounded-full flex items-center justify-center">
        <span class="text-esprit-red font-bold text-sm">
          {{ current_user.username|slice:":1"|upper }}
        </span>
      </div>
      <div>
        <p class="text-sm font-medium text-gray-900">{{ current_user.username }}</p>
        <p class="text-xs text-gray-500">{{ current_user.role|default:"Étudiant" }}</p>
      </div>
    </div>
  </div>
</nav>